(this["webpackJsonptest-app"]=this["webpackJsonptest-app"]||[]).push([[2],{134:function(e,t,n){},135:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),s=n.n(c),i=n(12),o=n(36),u=n(22),l=n(38),d=n(5),j=n(11),p=n(4),b=n(170),O=n(187),h=n(177),f=n(178),_=n(179),m=n(183),E=n(60),g=n(182),S=n(180),x=n(68),y=n.n(x),R=n(173),v=n(175),A=n(176),U=n(67),T=n.n(U),L=n(90),I=n.n(L),k=n(89),D=n.n(k),w=n(66),N=n.n(w),C=n(55),G=n(52),M=n(2),F=240,H=Object(b.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(F,"px)"),marginLeft:F,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},menuButtonClose:{marginLeft:e.spacing(0)},hide:{display:"none"},drawer:{width:F,flexShrink:0},drawerPaper:{width:F},drawerHeader:Object(d.a)(Object(d.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-start"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}})),B=function(e){var t=e.children,n=H(),a=Object(j.g)(),c=Object(i.b)(),s=r.a.useState(!1),o=Object(l.a)(s,2),d=o[0],b=o[1],x=Object(i.c)((function(e){return e.user})),U=Object(i.c)((function(e){return e.admin})),L=x.isAuthenticated&&"user"===x.user.role?Object(M.jsxs)(R.a,{button:!0,onClick:function(e){return a.push("/dashboard")},children:[Object(M.jsx)(v.a,{children:Object(M.jsx)(N.a,{})}),Object(M.jsx)(A.a,{primary:"Dashboard"})]},"dashboard"):U.isAuthenticated&&"admin"===U.admin.role?Object(M.jsxs)(R.a,{button:!0,onClick:function(e){return a.push("/users")},children:[Object(M.jsx)(v.a,{children:Object(M.jsx)(N.a,{})}),Object(M.jsx)(A.a,{primary:"Users"})]},"users"):null,k=x.isAuthenticated?Object(M.jsxs)(R.a,{button:!0,onClick:function(e){return c(Object(C.b)())},children:[Object(M.jsx)(v.a,{children:Object(M.jsx)(T.a,{})}),Object(M.jsx)(A.a,{primary:"Logout"})]},"logout"):U.isAuthenticated?Object(M.jsxs)(R.a,{button:!0,onClick:function(e){return c(Object(G.d)())},children:[Object(M.jsx)(v.a,{children:Object(M.jsx)(T.a,{})}),Object(M.jsx)(A.a,{primary:"Logout"})]},"logout"):Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(R.a,{button:!0,onClick:function(e){return a.push("/register")},children:[Object(M.jsx)(v.a,{children:Object(M.jsx)(D.a,{})}),Object(M.jsx)(A.a,{primary:"Register"})]},"register"),Object(M.jsxs)(R.a,{button:!0,onClick:function(e){return a.push("/")},children:[Object(M.jsx)(v.a,{children:Object(M.jsx)(I.a,{})}),Object(M.jsx)(A.a,{primary:"Login"})]},"login")]});return Object(M.jsxs)("div",{className:n.root,children:[Object(M.jsx)(h.a,{}),Object(M.jsx)(f.a,{position:"fixed",className:Object(p.a)(n.appBar,Object(u.a)({},n.appBarShift,d)),children:Object(M.jsxs)(_.a,{children:[Object(M.jsx)(S.a,{color:"inherit","aria-label":"open drawer",onClick:function(){b(!0)},edge:"start",className:Object(p.a)(n.menuButton,d&&n.hide),children:Object(M.jsx)(y.a,{})}),Object(M.jsx)(E.a,{variant:"h6",noWrap:!0,children:"Simple Auth"})]})}),Object(M.jsxs)(O.a,{className:n.drawer,variant:"persistent",anchor:"left",open:d,classes:{paper:n.drawerPaper},children:[Object(M.jsx)("div",{className:n.drawerHeader,children:Object(M.jsx)(S.a,{color:"inherit","aria-label":"close drawer",onClick:function(){b(!1)},edge:"start",className:Object(p.a)(n.menuButton,d?n.menuButtonClose:n.hide),children:Object(M.jsx)(y.a,{})})}),Object(M.jsx)(g.a,{}),Object(M.jsx)(m.a,{children:L}),L?Object(M.jsx)(g.a,{}):null,Object(M.jsx)(m.a,{children:k})]}),Object(M.jsxs)("main",{className:Object(p.a)(n.content,Object(u.a)({},n.contentShift,d)),children:[Object(M.jsx)("div",{className:n.drawerHeader}),t]})]})},P=n(185),z=n(16),V=function(e){var t=e.data,n=Object(i.b)();return Object(M.jsx)(P.a,{variant:"filled",severity:t.alertType,onClose:function(){return n(Object(z.a)(t.id))},children:t.msg})},W=Object(b.a)((function(e){return{alertWrapper:{position:"absolute",bottom:"5rem",right:"2rem",width:"20%",display:"flex",flexDirection:"column",gap:".5rem"}}})),J=function(){var e=W(),t=Object(i.c)((function(e){return e.alert}));return t.length?Object(M.jsx)("div",{className:Object(p.a)(e.alertWrapper),children:t.map((function(e){return Object(M.jsx)(V,{data:e},e.id)}))}):null},Y=n(3),q=n(184),K=Object(b.a)((function(e){return{root:{position:"absolute",top:"0",left:"0",width:"100%",height:"100vh",display:"flex",displayDirection:"column",justifyContent:"center",alignItems:"center"}}})),Q=function(){var e=K();return Object(M.jsx)("div",{className:e.root,children:Object(M.jsx)(q.a,{})})},X=["component"],Z=function(e){var t=e.component,n=Object(Y.a)(e,X),a=Object(i.c)((function(e){return e.user})),r=Object(i.c)((function(e){return e.admin}));return Object(M.jsx)(j.b,Object(d.a)({render:function(e){return r.loading?Object(M.jsx)(Q,{}):r.isAuthenticated?a.isAuthenticated&&"user"===a.user.role?Object(M.jsx)(j.a,{to:"/dashboard"}):r.isAuthenticated&&"admin"===r.admin.role?Object(M.jsx)(t,Object(d.a)({},e)):void 0:Object(M.jsx)(j.a,{to:"/"})}},n))},$=["component"],ee=function(e){var t=e.component,n=Object(Y.a)(e,$),a=Object(i.c)((function(e){return e.user})),r=Object(i.c)((function(e){return e.admin}));return Object(M.jsx)(j.b,Object(d.a)({render:function(e){return a.loading?Object(M.jsx)(Q,{}):a.isAuthenticated?r.isAuthenticated&&"admin"===r.admin.role?Object(M.jsx)(j.a,{to:"/users"}):a.isAuthenticated&&"user"===a.user.role?Object(M.jsx)(t,Object(d.a)({},e)):void 0:Object(M.jsx)(j.a,{to:"/"})}},n))},te=["component"],ne=function(e){var t=e.component,n=Object(Y.a)(e,te),a=Object(i.c)((function(e){return e.user})),r=Object(i.c)((function(e){return e.admin}));return Object(M.jsx)(j.b,Object(d.a)({render:function(e){return a.loading||r.loading?Object(M.jsx)(Q,{}):a.isAuthenticated&&"user"===a.user.role?Object(M.jsx)(j.a,{to:"/dashboard"}):r.isAuthenticated&&"admin"===r.admin.role?Object(M.jsx)(j.a,{to:"/users"}):Object(M.jsx)(t,Object(d.a)({},e))}},n))},ae=[{name:"login",path:"/",component:r.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(6)]).then(n.bind(null,442))})),exact:!0,role:"guest",auth:!1},{name:"register",path:"/register",component:r.a.lazy((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,438))})),exact:!0,role:"guest",auth:!1},{name:"dashboard",path:"/dashboard",component:r.a.lazy((function(){return n.e(9).then(n.bind(null,439))})),exact:!0,role:"user",auth:!0},{name:"users",path:"/users",component:r.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(5),n.e(8)]).then(n.bind(null,447))})),exact:!0,role:"admin",auth:!0},{name:"notfound",path:"*",component:r.a.lazy((function(){return n.e(10).then(n.bind(null,440))}))}],re=function(){var e=null===ae||void 0===ae?void 0:ae.map((function(e,t){return e.auth||"guest"!==e.role?e.auth&&"user"===e.role?Object(a.createElement)(ee,Object(d.a)(Object(d.a)({},e),{},{key:"private__route__".concat(t)})):e.auth&&"admin"===e.role?Object(a.createElement)(Z,Object(d.a)(Object(d.a)({},e),{},{key:"admin__route__".concat(t)})):Object(a.createElement)(j.b,Object(d.a)(Object(d.a)({},e),{},{key:"notfound__route__".concat(t)})):Object(a.createElement)(ne,Object(d.a)(Object(d.a)({},e),{},{key:"guest__route__".concat(t)}))}));return Object(M.jsx)(j.d,{children:e})},ce=n(37);localStorage.admin__token&&Object(ce.a)(localStorage.admin__token),localStorage.user__token&&Object(ce.b)(localStorage.user__token);var se=function(){var e=Object(i.b)();return r.a.useEffect((function(){return e(Object(C.a)())}),[e]),r.a.useEffect((function(){return e(Object(G.c)())}),[e]),Object(M.jsx)(o.a,{children:Object(M.jsx)(B,{children:Object(M.jsxs)("div",{className:"app",children:[Object(M.jsx)(re,{}),Object(M.jsx)(J,{})]})})})},ie=(n(134),n(41)),oe=n(91),ue=n(92),le=n(6),de={token:localStorage.getItem("admin__token"),loading:!0,isAuthenticated:null,admin:{},users:[]},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le.a.ADMIN_LOADED:return Object(d.a)(Object(d.a)({},e),{},{isAuthenticated:!0,loading:!1,admin:t.payload});case le.a.ADMIN_LOGIN_SUCCESS:return localStorage.setItem("admin__token",t.payload.token),Object(d.a)(Object(d.a)(Object(d.a)({},e),t.payload),{},{isAuthenticated:!0,loading:!1});case le.a.GET_USERS:return Object(d.a)(Object(d.a)({},e),{},{users:t.payload});case le.a.DELETE_USER:return Object(d.a)(Object(d.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.payload}))});case le.a.UPDATE_USER:return Object(d.a)(Object(d.a)({},e),{},{users:e.users.map((function(e){return e._id===t.payload.id?Object(d.a)({},t.payload.user):e}))});case le.a.ADMIN_LOGIN_FAIL:case le.a.ADMIN_AUTH_ERROR:case le.a.ADMIN_LOGOUT:return localStorage.removeItem("admin__token"),Object(d.a)(Object(d.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1,admin:{},users:[]});default:return e}},pe={token:localStorage.getItem("user__token"),loading:!0,isAuthenticated:null,user:{}},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le.a.USER_LOADED:return Object(d.a)(Object(d.a)({},e),{},{isAuthenticated:!0,loading:!1,user:t.payload});case le.a.USER_REGISTER_SUCCESS:case le.a.USER_LOGIN_SUCCESS:return localStorage.setItem("user__token",t.payload.token),Object(d.a)(Object(d.a)(Object(d.a)({},e),t.payload),{},{isAuthenticated:!0,loading:!1});case le.a.USER_REGISTER_FAIL:case le.a.USER_LOGIN_FAIL:case le.a.USER_AUTH_ERROR:case le.a.USER_LOGOUT:return localStorage.removeItem("user__token"),Object(d.a)(Object(d.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1,user:{}});default:return e}},Oe=n(26),he=[],fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le.a.SET_ALERT:return[].concat(Object(Oe.a)(e),[t.payload]);case le.a.REMOVE_ALERT:return e.filter((function(e){return e.id!==t.payload}));default:return e}},_e=Object(ie.combineReducers)({admin:je,user:be,alert:fe}),me=[ue.a],Ee=Object(ie.createStore)(_e,{},Object(oe.composeWithDevTools)(ie.applyMiddleware.apply(void 0,me)));s.a.render(Object(M.jsx)(r.a.StrictMode,{children:Object(M.jsx)(r.a.Suspense,{fallback:Object(M.jsx)(Q,{}),children:Object(M.jsx)(i.a,{store:Ee,children:Object(M.jsx)(se,{})})})}),document.getElementById("simple__auth"))},16:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s}));var a=n(138),r=n(6),c=function(e){return function(t){var n=Object(a.a)(),c=e.msg,s=e.status,i=e.alertType;t({type:r.a.SET_ALERT,payload:{id:n,msg:c,status:s,alertType:i}}),setTimeout((function(){t({type:r.a.REMOVE_ALERT,payload:n})}),4e3)}},s=function(e){return function(t){return t({type:r.a.REMOVE_ALERT,payload:e})}}},37:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s}));var a=n(18),r=n.n(a),c=function(e){e?r.a.defaults.headers["x-user-auth-token"]=e:delete r.a.defaults.headers["x-user-auth-token"]},s=function(e){e?r.a.defaults.headers["x-admin-auth-token"]=e:delete r.a.defaults.headers["x-admin-auth-token"]}},52:function(e,t,n){"use strict";n.d(t,"c",(function(){return j})),n.d(t,"e",(function(){return p})),n.d(t,"b",(function(){return b})),n.d(t,"f",(function(){return O})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return f}));var a=n(15),r=n.n(a),c=n(27),s=n(18),i=n.n(s),o=n(37),u=n(16),l=n(6),d="http://localhost:5000/api/v1/admin",j=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.admin__token&&Object(o.a)(localStorage.admin__token),n={header:{"Content-Type":"application/json"}},e.prev=2,e.next=5,i.a.get("".concat(d,"/auth-admin"),n);case 5:a=e.sent,c=a.data,t({type:l.a.ADMIN_LOADED,payload:c}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t({type:l.a.ADMIN_AUTH_ERROR});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},p=function(e,t){return function(){var n=Object(c.a)(r.a.mark((function n(a){var c,s,o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={header:{"Content-Type":"application/json"}},n.prev=1,n.next=4,i.a.post("".concat(d,"/login"),e,c);case 4:s=n.sent,o=s.data,a({type:l.a.ADMIN_LOGIN_SUCCESS,payload:o}),a(Object(u.b)({msg:"Admin Login Successful!",status:200,alertType:"success"})),a(j()),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(1),a({type:l.a.ADMIN_LOGIN_FAIL}),a(Object(u.b)({msg:n.t0.response.data,status:n.t0.response.status,alertType:"error"}));case 15:return n.prev=15,t(!1),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[1,11,15,18]])})));return function(e){return n.apply(this,arguments)}}()},b=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={header:{"Content-Type":"application/json"}},e.prev=1,e.next=4,i.a.get("".concat(d,"/users"),n);case 4:a=e.sent,c=a.data,t({type:l.a.GET_USERS,payload:c}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(Object(u.b)({msg:"Something went wrong when fetching the users!",status:e.t0.response.status,alertType:"error"}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},O=function(e,t,n){return function(){var a=Object(c.a)(r.a.mark((function a(c){var s,o,j;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s={header:{"Content-Type":"application/json"}},a.prev=1,a.next=4,i.a.patch("".concat(d,"/users/").concat(t),e,s);case 4:o=a.sent,j=o.data,c({type:l.a.UPDATE_USER,payload:j}),c(b()),c(Object(u.b)({msg:"User Data Updated!",status:200,alertType:"success"})),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),c(Object(u.b)({msg:"Something went wrong when updating the users!",status:a.t0.response.status,alertType:"error"}));case 14:return a.prev=14,n(!1),a.finish(14);case 17:case"end":return a.stop()}}),a,null,[[1,11,14,17]])})));return function(e){return a.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={header:{"Content-Type":"application/json"}},t.prev=1,t.next=4,i.a.delete("".concat(d,"/users/").concat(e),a);case 4:n({type:l.a.DELETE_USER,payload:e}),n(Object(u.b)({msg:"User has been deleted!",status:200,alertType:"success"})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n(Object(u.b)({msg:"Something went wrong when deleting the users!",status:t.t0.response.status,alertType:"error"}));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},f=function(){return function(e){e({type:l.a.ADMIN_LOGOUT}),e(Object(u.b)({msg:"You have logged out!",status:200,alertType:"success"}))}}},55:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return b})),n.d(t,"b",(function(){return O}));var a=n(15),r=n.n(a),c=n(27),s=n(18),i=n.n(s),o=n(6),u=n(37),l=n(16),d="http://localhost:5000/api/v1/user",j=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.user__token&&Object(u.b)(localStorage.user__token),n={header:{"Content-Type":"application/json"}},e.prev=2,e.next=5,i.a.get("".concat(d,"/auth-user"),n);case 5:a=e.sent,c=a.data,t({type:o.a.USER_LOADED,payload:c}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t({type:o.a.USER_AUTH_ERROR});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},p=function(e,t){return function(){var n=Object(c.a)(r.a.mark((function n(a){var c,s,u;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={header:{"Content-Type":"application/json"}},n.prev=1,n.next=4,i.a.post("".concat(d,"/login"),e,c);case 4:s=n.sent,u=s.data,a({type:o.a.USER_LOGIN_SUCCESS,payload:u}),a(Object(l.b)({msg:"Login Successful!",status:200,alertType:"success"})),a(j()),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(1),a({type:o.a.USER_LOGIN_FAIL}),a(Object(l.b)({msg:n.t0.response.data,status:n.t0.response.status,alertType:"error"}));case 15:return n.prev=15,t(!1),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[1,11,15,18]])})));return function(e){return n.apply(this,arguments)}}()},b=function(e,t){return function(){var n=Object(c.a)(r.a.mark((function n(a){var c,s,u;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={header:{"Content-Type":"application/json"}},n.prev=1,n.next=4,i.a.post("".concat(d,"/register"),e,c);case 4:s=n.sent,u=s.data,a({type:o.a.USER_REGISTER_SUCCESS,payload:u}),a(Object(l.b)({msg:"Register successful!",status:200,alertType:"success"})),a(j()),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(1),a({type:o.a.USER_REGISTER_FAIL}),a(Object(l.b)({msg:n.t0.response.data,status:n.t0.response.status,alertType:"error"}));case 15:return n.prev=15,t(!1),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[1,11,15,18]])})));return function(e){return n.apply(this,arguments)}}()},O=function(){return function(e){e({type:o.a.USER_LOGOUT}),e(Object(l.b)({msg:"You have logged out!",status:200,alertType:"success"}))}}},6:function(e,t,n){"use strict";var a;!function(e){e.SET_ALERT="SET_ALERT",e.REMOVE_ALERT="REMOVE_ALERT",e.USER_LOADED="USER_LOADED",e.USER_AUTH_ERROR="USER_AUTH_ERROR",e.USER_REGISTER_SUCCESS="USER_REGISTER_SUCCESS",e.USER_REGISTER_FAIL="USER_REGISTER_FAIL",e.USER_LOGIN_SUCCESS="USER_LOGIN_SUCCESS",e.USER_LOGIN_FAIL="USER_LOGIN_FAIL",e.USER_LOGOUT="USER_LOGOUT",e.ADMIN_LOADED="ADMIN_LOADED",e.ADMIN_AUTH_ERROR="ADMIN_AUTH_ERROR",e.ADMIN_LOGIN_SUCCESS="ADMIN_LOGIN_SUCCESS",e.ADMIN_LOGIN_FAIL="ADMIN_LOGIN_FAIL",e.ADMIN_LOGOUT="ADMIN_LOGOUT",e.GET_USERS="GET_USERS",e.UPDATE_USER="UPDATE_USER",e.DELETE_USER="DELETE_USER"}(a||(a={})),t.a=a}},[[135,3,4]]]);
//# sourceMappingURL=main.baecdc80.chunk.js.map